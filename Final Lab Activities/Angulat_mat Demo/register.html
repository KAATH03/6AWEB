<div class="form-container">

  <!-- BADGE HEADER -->
  <h2 matBadge="NEW" matBadgeColor="accent" matBadgePosition="above after">
    Register Form
  </h2>

  <form [formGroup]="formdata" (ngSubmit)="onClickSubmit(formdata.value)">

    <mat-form-field appearance="fill">
      <mat-label>Username</mat-label>
      <input matInput placeholder="Enter Text" formControlName="userName">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Email</mat-label>
      <input matInput type="email" placeholder="Enter Email" formControlName="email">
      @if (formdata.controls['email'].invalid && formdata.controls['email'].touched) {
        <mat-error>
          Email is required and must be a valid email.
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Password</mat-label>
      <input matInput type="password" placeholder="Enter password" formControlName="password">
      @if (formdata.controls['password'].invalid && formdata.controls['password'].touched) {
        <mat-error>
          Password is required and must be at least 8 characters long.
        </mat-error>
      }
    </mat-form-field>

    <div class="radio-group">
      <label class="radio-label">Gender</label>
      <mat-radio-group formControlName="gender" class="gender-radio-group">
        <mat-radio-button value="male">Male</mat-radio-button>
        <mat-radio-button value="female">Female</mat-radio-button>
        <mat-radio-button value="other">Other</mat-radio-button>
      </mat-radio-group>
    </div>

    <mat-form-field appearance="fill">
      <mat-label>Address</mat-label>
      <input matInput placeholder="Enter Address" formControlName="address">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Birth Date</mat-label>
      <input matInput [matDatepicker]="picker" placeholder="Select a date" formControlName="birthDate">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      @if (formdata.get('birthDate')?.hasError('required')) {
        <mat-error>
          Birth date is required.
        </mat-error>
      }
    </mat-form-field>

    <!-- SLIDER -->
    <div class="sider-group">
      <label class="slider-label">
        Angular Skill Level: {{ formdata.get('angularSkillLevel')?.value }}
      </label>
      <mat-slider [min]="minSkillLevel" [max]="maxSkillLevel" [step]="1" [discrete]="true">
        <input matSliderThumb formControlName="angularSkillLevel">
      </mat-slider>
    </div>

    <!-- SLIDE TOGGLE -->
    <div class="toggle-group" style="margin-top: 16px;">
      <mat-slide-toggle formControlName="notifications">
        Enable Notifications
      </mat-slide-toggle>

      <div style="margin-top: 6px;">
        Status:
        @if (formdata.get('notifications')?.value) {
          <b>ON</b>
        } @else {
          <b>OFF</b>
        }
      </div>
    </div>

    <!-- SUBMIT BUTTON with BADGE -->
    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="!formdata.valid || isLoading"
      matBadge="!"
      matBadgeColor="warn"
      matBadgeOverlap="false">
      Click here
    </button>

    <!-- PROGRESS SPINNER -->
    @if (isLoading) {
      <div style="margin-top: 20px; display: flex; justify-content: center;">
        <mat-progress-spinner mode="indeterminate" diameter="50" color="primary">
        </mat-progress-spinner>
      </div>
    }

    @if (submitted) {
      <p>
        You have entered: <br>
        Username: {{ userName }} <br>
        Email: {{ email }} <br>
        Password: {{ password }} <br>
        Gender: {{ gender }} <br>
        Address: {{ address }} <br>
        Birth Date: {{ birthDate | date:'shortDate' }} <br>
        Angular Skill Level: {{ angularSkillLevel }} <br>
        Notifications: {{ formdata.get('notifications')?.value ? 'ON' : 'OFF' }}
      </p>
    }

  </form>
</div>
